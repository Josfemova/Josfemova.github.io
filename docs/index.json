[{"categories":["casual"],"content":"Hola hola hello hello","date":"12-20-2021","objectID":"/hola_world/","tags":["casual"],"title":"Hola world","uri":"/hola_world/"},{"categories":["casual"],"content":"Why I made this blog I need a place to you know…blog about stuff I do, so naturally, I searched for a hugo theme that I liked and welp…here we are. ","date":"12-20-2021","objectID":"/hola_world/:1:0","tags":["casual"],"title":"Hola world","uri":"/hola_world/"},{"categories":["casual"],"content":"What to expect I do a lot of stuff with different microcontrollers, and I’m planning on doing some guides with some of them. I’m also working in some interesting science/data aquisition projects, so I will probably post about that when I get the time to do so. Basically, expect: MCU quickstart guides Posts about incredibly niche laboratory equipment drivers Random tech jargon and much more Did I mention I am a Rust advocate? O yeah, I’m going to post about that too, especially about developing stuff with the embedded ecosystem. ","date":"12-20-2021","objectID":"/hola_world/:2:0","tags":["casual"],"title":"Hola world","uri":"/hola_world/"},{"categories":["casual"],"content":"On the language of this blog I know there are settings in the template that allow me to use both, spanish and english, but quite honestly, that’s too much work. Translation is only required sometimes, and I have a thousand things to research, so we going spanglish. Do not tempt me to seriously start learning german because this will become a trilingual blog, and it’s way too much fun to simultaneously fail at three languages at the same time. ","date":"12-20-2021","objectID":"/hola_world/:3:0","tags":["casual"],"title":"Hola world","uri":"/hola_world/"},{"categories":["embedded stuff"],"content":"En búsqueda de los secretos que deberían estar en la documentación","date":"12-23-2021","objectID":"/devlog-0/","tags":["devboard","eos-s3"],"title":"Devlog 0 - Tratando de usar la EOS-S3","uri":"/devlog-0/"},{"categories":["embedded stuff"],"content":"Una aventura en el mundo del workflow OSS con FPGAs y el encuentro con algunos de los retos. ","date":"12-23-2021","objectID":"/devlog-0/:0:0","tags":["devboard","eos-s3"],"title":"Devlog 0 - Tratando de usar la EOS-S3","uri":"/devlog-0/"},{"categories":["embedded stuff"],"content":"El inicio de la aventura Un día lavando platos y viendo videos salió un video de Sparkfun anunciando una nueva devboard. La misma tenía una particularidad: Hacía uso de un MCU con una eFPGA. La tarjeta en cuestión era la QuickLogic Thing Plus, y el MCU el EOS-S3. La tarjeta se veía WAPA, pero no me sentía en suficiente confianza como para verme tentado a buscarla. Agréguele unos cuantos meses jugando con el maravilloso mundo de Rust en embebidos y un curso genial de Diseño Lógico con Pablo Mendoza en el cual hicimos uso de herramientas como iverilog y Yosys, y ya el prospecto de utilizar una tarjeta híbrida parece más atractivo. Investigando más sobre el ecosistema todo se veía aún mejor: Soporte en Zephyr. Soporte de FreeRTOS. Soporte para aplicaciones de “TinyML”. Workflow completamente OSS para el lado de la FPGA. Para no hacer el cuento más largo, se presentó una posibilidad de hacer una compra en grupo en Digikey, y 3 de los compradores fuimos atraídos por los cantos de sirena de la devboard de Sparkfun con la EOS-S3. ","date":"12-23-2021","objectID":"/devlog-0/:1:0","tags":["devboard","eos-s3"],"title":"Devlog 0 - Tratando de usar la EOS-S3","uri":"/devlog-0/"},{"categories":["embedded stuff"],"content":"Ok pero…Cómo se programa? Jajajajjajajajjaja… eh… Ahí está el detalle… Existen 3 maneras distintas de trabajar con el dispositivo: La versión obsoleta que ya no existe, o mejor dicho, a la que apuntan los links de documentación de la tarjeta. La versión funcional, pero técnicamente obsoleta porque hace uso de versiones desactualizadas de las herramientas que componen el workflow. La versión “correcta”, pero hasta el momento incompleta y por pura casualidad de la vida en este momento siendo completada, pero claramente no documentada de ninguna forma. La versión estable El workflow estable no es malo, pero hay que considerar que hay breaking changes respecto al qu está en desarrollo, si quieren probarlo pueden ir a este sitio en dónde se explica como hacer la instalación de el toolchain para correr un ejemplo. Lo que sí deben notar es que si quieren correr los ejemplos en el qorc-sdk tienen que tomar esto y esto otro en cuenta. Si están algo cortos de tiempo la verdad es que es mejor esperar un poco a que se estabilice el nuevo workflow ","date":"12-23-2021","objectID":"/devlog-0/:2:0","tags":["devboard","eos-s3"],"title":"Devlog 0 - Tratando de usar la EOS-S3","uri":"/devlog-0/"},{"categories":["embedded stuff"],"content":"Pero…uh…por qué Un poco de investigación y saltos de repo en repo de github hace posible reconstruir medio medio la historia completa: ","date":"12-23-2021","objectID":"/devlog-0/:3:0","tags":["devboard","eos-s3"],"title":"Devlog 0 - Tratando de usar la EOS-S3","uri":"/devlog-0/"},{"categories":["embedded stuff"],"content":"Parte 1: Poseidón maldice a Odiseo Digamos que en esta fase es cuando la gente de SymbiFlow comienza a hacer un push más fuerte para ser reconocidos. Varios videos de esto están disponibles en internet. El problema es que todo dependía de workflows creados a partir de hacerle ingeniería inversa a tarjetas de Lattice y Xilinx. Aquí es cuando surge QuickLogic, proponiendo algo que podía cambiar el paradigma de desarrollo en FPGAs, o al menos esa es la intención. No solo tener el toolchain OSS es suficiente, se requieren de plataformas Open Source en las que no sea un dolor trabajar. Además, si ya se tiene una plataforma en la que se puede trabajar “bien”, claramente el atractivo para mercados como el de makers sería mayor - y este mercado, por más que a algunos profesionales en electo lo traten con desdén - sigue siendo el mercado que atrae a los contribuidores OSS que le dan soporte a una plataforma completa en micro-segundos. Pero…uh..oh…varios retos adelante. ","date":"12-23-2021","objectID":"/devlog-0/:3:1","tags":["devboard","eos-s3"],"title":"Devlog 0 - Tratando de usar la EOS-S3","uri":"/devlog-0/"},{"categories":["embedded stuff"],"content":"Parte 2: EOS-S3 Speedrun 50% QuickLogic hace un esfuerzo enorme por traer la FPGA Open Source prometida, la mesías, las PolarPro3, en su primera encarnación como una eFPGA en un SoC que incluye a un Cortex M4F, el glorioso EOS-S3, pero he… hehe… No tienen exactamente a los más experimentados en la industria o en la contribución de los proyectos que componen el workflow. Figura 1. Poster anunciando la devboard QuickFeather. Anuncian la QuickFeather - una devboard orientada a makers basada en el MCU EOS-S3 - en crowdsupply, de manera que aquellas personas interesadas en la propuesta de QuikcLogic pudiesen colaborar con el funding de la iniciativa. La campaña alcanza su objetivo y QuickLogic consigue el dinero que necesita para “terminar” lo que falta para desarrollar en la plataforma. QuickLogic hace forks de los repos de Yosys, SymbiFlow, VPR, etc, algo normal cuando se quiere contribuir un proyecto pero…sacan la EOS-S3 al mercado sin haber confirmado que los proyectos oficiales aceptarían los cambios. Figura 2. La mantainer de `Yosys` regañando a un desarrollador de QuickLogic por evil hacks. Regaño completo aquí. No hace falta decir que tratar de hacer un merge masivo de cambios en diferentes proyectos sin haber hecho una contribución previa y metiendo todo en humongo-Pull-Requests no iba de salir bien. Pero entonces surge un problema: si no integraron sus cambios…entonces como va a hacer la gente para desarrollar? Ya todo estaba técnicamente listo, no pueden entregar una tarjeta sin soporte, pero necesitan documentar algo. Y pues bueno, por eso toda la documentación original apunta a los forks de QuickLogic, y Todos los ejemplos Todas las guías Todo el material de marketing Dependen de un workflow basado en forks incorrectos y que no tendrán soporte a futuro en su forma original, especialmente en lo que está relacionado a Yosys. ","date":"12-23-2021","objectID":"/devlog-0/:3:2","tags":["devboard","eos-s3"],"title":"Devlog 0 - Tratando de usar la EOS-S3","uri":"/devlog-0/"},{"categories":["embedded stuff"],"content":"Limpiando el cuarto Hey, error de principiante, al fin y al cabo los esfuerzos de QuickLogic son legítimamente buenos, pero los golpes contra la pared cuando no se tiene el knowhow y experiencia pueden ser algo duros. Por dicha, no desaparecieron, sino que se pusieron a corregir sus errores originales. Las contribuciones posteriores a Yosys para darle soporte a la eFPGA de la EOS-S3 son aceptadas e integradas poco a poco, hasta el punto de que bueno, al tiempo de escritura de esta nota, no hace falta tanto para que el soporte en Yosys esté completo - pero estos cambios fueron introducidos posterior a la versión 0.9 de Yosys en la forma de soporte para la PolarPro3 Figura 4. Nueva serie de PRs en `Yosys`, esta vez con una mejor recepción. SymbiFlow también avanza, y QuickLogic hace un esfuerzo para enmendar los errores. SymbiFlow hace una guía para configurar el espacio de trabajo para distintos targets e integra algunos de los cambios de QuickLogic. Sin embargo existen dos problemas: Esta documentación y los archivos de instalación hacen uso de el fork de Yosys 0.9 de QuickLogic…sí, el que estaba malo y les ganó un regaño. Los ejemplos viejos no fueron actualizados, y parece que se rompen algunas cosas (las notitas de cosas a tomar en cuenta) - el único ejemplo que funciona técnicamente no hace nada complejo. Estos avances se dieron circa Marzo-Julio 2021, osea son relativamente recientes pero: Ya estamos en Yosys 0.12 SymbiFlow también ha cambiado mucho, y la versión más actual del flujo de trabajo ya hace uso de Yosys 0.12 ","date":"12-23-2021","objectID":"/devlog-0/:3:3","tags":["devboard","eos-s3"],"title":"Devlog 0 - Tratando de usar la EOS-S3","uri":"/devlog-0/"},{"categories":["embedded stuff"],"content":"Llegando a Ítaca Por pura coincidencia, mientras trabajaba en este post, aparecieron 4 nuevos PR’s en el repo de SymbiFlow. Como mencioné antes, La EOS-S3 quedó algo rezagada pues para la programación de la FPGA se necesitaba de un fork oxidado de Yosys. Figura 5. Grupo de Pull Requests que actualizan los componentes de la EOS-S3 en `SymbiFlow`, ahora haciendo uso de lo integrado para `Yosys` 0.12 sin evil hacks. Parece que justo estamos en las semanas en lo que eso cambia, por lo que si se quiere utilizar el flujo de trabajo “bueno” hay que esperar un toque, pero va a valer la pena, aunque sigue existiendo un problema un toque importante: Todos los ejemplos aún asumen que se trabaja con el workflow oxidado. Lo que significa que en este punto…el código es la documentación. Y se siente un toque como que la apuesta de QuickLogic es que la comunidad re-documente el SDK, o al menos no le están dedicando esfuerzo a actualizar el monolito. Meguka is suffering Algo que no he comentado en todo este rato es que toda esta info la encontré a punta de la antigua técnica ninja costarricense: “echando a perder se aprende”. Todo lo que pongo en este post que conocimiento adquirido luego de sufrir varios días intentado diferentes setups en máquinas virtuales y tratando de extraer cada miligramo de información posible de lo que hay disponibles. En un punto hasta gasté varias horas compilando Yosys desde el source. Una experiencia divertida de investigación para mí, pero definitivamente es un toque irresponsable de parte de SparkFun el hacer el pitch de que la tarjeta está “maker-ready”. Adafruit cuando algo está en este estado al menos lo dice directamente en la descripción del producto. ","date":"12-23-2021","objectID":"/devlog-0/:3:4","tags":["devboard","eos-s3"],"title":"Devlog 0 - Tratando de usar la EOS-S3","uri":"/devlog-0/"},{"categories":["embedded stuff"],"content":"Pasos siguientes En mi caso, voy a esperar a que los cambios de la figura 5 sean integrados en SymbiFlow. Después de eso creo que todo va a ser más utilizable. En el caso del SDK, honestamente no le doy mucha importancia, porque mi intención ahorita no es hacer algo ultracomplejo, realmente quiero probar el workflow Full Open Source con la FPGA, pero… hehe recuerdan cuando al puro principio mencioné Rust? hahahahhahaha La tarjeta no tiene un conjunto de archivos SVD, lo que dan capacidades de debuggeo y desarrollo aumentadas…y también dan soporte prácticamente gratis en Rust por medio de svd2rust. Soporte en rust permitiría explotar más completamente las capacidades de la tarjeta. Así que si tengo tiempo, mis esfuerzos serán dedicados a sacar un SVD funcional, y posteriormente, probablemente un HAL. Es un camino largo, pero es una experiencia extremadamente didáctica y la verdad una buena oportunidad de hacer una contribución importante. Incluso si no se es un Rust shill, EL SVD permite hacer uso de herramientas extremadamente poderosas como Cortex Debug. ","date":"12-23-2021","objectID":"/devlog-0/:4:0","tags":["devboard","eos-s3"],"title":"Devlog 0 - Tratando de usar la EOS-S3","uri":"/devlog-0/"},{"categories":null,"content":"Colaborating with OSS I’m currently developing Tarantulab with a colleague, check it out!. I’ve colaborated with the atsamd-rs people to mantain the ItsyBitsy M4 Rsut BSP up to date, you can check that project here here. Ofc, I only updated a bsp, nothing big really. I am currently working on a mdbook to teach programming on embedded systems using Rust and the ubiquitous ESP32, I’ll keep you posted. Eventually, it should join the esp-rs book but not completely. I also bought an EOS-S3 devboard, which means I will document the process of using it. Don’t hope for a complete starch-press-like guide, but I will try to get there from post to post. Might fuck around and create a Rust HAL for it eventually, but those who fuck around eventually find out, let’s hope the finding out part is easy on my hubris. ","date":"12-20-2021","objectID":"/about/:1:0","tags":null,"title":"About","uri":"/about/"},{"categories":null,"content":"I’ve made some learning material…perhaps you want to check that? Curso de nivelación en lenguajes de programación para programa de maestría en electrónica: https://josfemova.gitlab.io/lenguajes-de-programacion/ Repositorio con material utilizado en taller de Tkinter para el curso de Taller de Programación: https://github.com/Josfemova/Talleres ","date":"12-20-2021","objectID":"/about/:2:0","tags":null,"title":"About","uri":"/about/"}]